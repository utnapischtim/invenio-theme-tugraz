{#
  Copyright (C) 2020 CERN.
  Copyright (C) 2020 Northwestern University.
  Copyright (C) 2020 Graz University of Technology

  invenio-theme-tugraz is free software; you can redistribute it and/or modify
  it under the terms of the MIT License; see LICENSE file for more details.

  origin: invenio-rdm-records/record_landing_page.html
#}

{%- extends config.BASE_TEMPLATE %}

{%- block css %}
{{ super() }}
{{ webpack['invenio-rdm-records-theme.css'] }}
{%- endblock css %}

{%- from "invenio_theme_tugraz/macros/files.html" import file_list_box, preview_file_box %}

{%- block page_body %}
<div class="ui container">
  <div class="ui padded relaxed grid">
    <div class="two column row">
      <div class="eight wide large screen column ten wide computer column">
        {%- block record_body %}

        <div class="left floated left aligned column">
          <span class="ui label teal" title="Publication date">
            {{ record.metadata.publication_date|to_date|format_date(format='long') }}
          </span>

          <span class="ui label record-version">
            Version {{ record.metadata.version }}
          </span>

          <span class="ui label grey">
            {{ record.metadata.resource_type | vocabulary_title('resource_type') }}
          </span>
        </div>

        <h1>{{ record.metadata.titles[0].title }}</h1>
        <p>
          {%- include "invenio_theme_tugraz/details/creators.html" %}
        </p>

        {%- if record.contributors %}
        <p>
          {%- include "invenio_theme_tugraz/details/contributors.html" %}
        </p>
        {%- endif %}

        <div class="ui grid">
          <div class="two column row">
            <div class="left floated column">
              {%- include "invenio_theme_tugraz/details/doi.html" %}
            </div>

            <div class="right floated column">
              {#
              {%- include "invenio_theme_tugraz/details/contact.html" %}
              #}


              <span class="access-right">
                {{ record.access | vocabulary_title('access_right') | lower }}
                (
                {%- for license in record.metadata.licenses%}
                <a href="{{license.uri}}" title="{{license.license}}">{{license.identifier}}</a>
                {% endfor %}
                )
              </span>
            </div>
          </div>
        </div>

        <hr />
        {%- include "invenio_theme_tugraz/details/description.html" %}

        {# files #}
        {%- if record.files and record | can_list_files %}
        {%- set files = record.files %}
        {{ preview_file_box(files | select_preview_file, pid) }}
        {{ file_list_box(files.dumps(), pid) }}
        {%- else %}
        <br>

        <p style="text-align: center;">
          No associated files.
        </p>
        {% endif %}

        {# More details #}

        {%- endblock record_body %}
      </div>

      <div class="eight wide large screen column six wide computer column">
        {% block sidebar %}
        {%- include "invenio_theme_tugraz/details/side_bar.html" %}
        {% endblock sidebar %}
      </div>
    </div>
  </div>
</div>

{%- endblock page_body %}

{%- block javascript %}
{{ super() }}
{{ webpack['invenio-rdm-records-js.js'] }}
{# Communities management #}
{{ webpack['invenio-communities-records.js'] }}
{{webpack['previewer_theme.js']}}
{%- endblock javascript %}
